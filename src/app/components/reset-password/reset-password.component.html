<div class="reset-password-container">
  <p-toast></p-toast>
  
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">
        <div class="reset-password-card">
          <div class="text-center mb-4">
            <h2 class="reset-title">Reset Your Password</h2>
            <p class="text-muted">Enter your new password below</p>
          </div>

          <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
            <!-- New Password Field -->
            <div class="mb-3">
              <label for="newPassword" class="form-label">New Password</label>
              <p-password 
                id="newPassword"
                formControlName="newPassword"
                [toggleMask]="true"
                [feedback]="true"
                [promptLabel]="'Choose a password'"
                [weakLabel]="'Too simple'"
                [mediumLabel]="'Average complexity'"
                [strongLabel]="'Complex password'"
                placeholder="Enter new password"
                [class.is-invalid]="resetPasswordForm.get('newPassword')?.invalid && resetPasswordForm.get('newPassword')?.touched"
                class="w-100"
              ></p-password>
              
              <div *ngIf="resetPasswordForm.get('newPassword')?.invalid && resetPasswordForm.get('newPassword')?.touched" 
                   class="invalid-feedback d-block">
                <small *ngIf="resetPasswordForm.get('newPassword')?.errors?.['required']">New password is required.</small>
                <small *ngIf="resetPasswordForm.get('newPassword')?.errors?.['minlength']">Password must be at least 8 characters.</small>
                <small *ngIf="resetPasswordForm.get('newPassword')?.errors?.['pattern']">
                  Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character.
                </small>
              </div>
            </div>

            <!-- Confirm Password Field -->
            <div class="mb-4">
              <label for="confirmPassword" class="form-label">Confirm Password</label>
              <p-password 
                id="confirmPassword"
                formControlName="confirmPassword"
                [toggleMask]="true"
                [feedback]="false"
                placeholder="Confirm new password"
                [class.is-invalid]="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched"
                class="w-100"
              ></p-password>
              
              <div *ngIf="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched" 
                   class="invalid-feedback d-block">
                <small *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['required']">Please confirm your password.</small>
                <small *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['passwordMismatch']">Passwords do not match.</small>
              </div>
            </div>

            <!-- Password Requirements -->
            <div class="password-requirements mb-4">
              <h6 class="requirements-title">Password Requirements:</h6>
              <ul class="requirements-list">
                <li [class.valid]="hasMinLength()">
                  At least 8 characters long
                </li>
                <li [class.valid]="hasLowercase()">
                  Contains lowercase letter
                </li>
                <li [class.valid]="hasUppercase()">
                  Contains uppercase letter
                </li>
                <li [class.valid]="hasNumber()">
                  Contains number
                </li>
                <li [class.valid]="hasSpecialChar()">
                  Contains special character (&#64;$!%*?&)
                </li>
              </ul>
            </div>

            <!-- Submit Button -->
            <div class="d-grid">
              <p-button 
                type="submit" 
                label="Reset Password" 
                icon="pi pi-key"
                [loading]="isLoading"
                [disabled]="resetPasswordForm.invalid || isLoading"
                class="w-100"
              ></p-button>
            </div>

            <!-- Back to Login Link -->
            <div class="text-center mt-3">
              <a [routerLink]="['/login']" class="back-to-login">
                <i class="pi pi-arrow-left me-1"></i>
                Back to Login
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div> 