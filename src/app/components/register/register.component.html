<div class="register-container">
  <p-toast></p-toast>

  <div class="container-fluid h-100 p-0">
    <div class="row h-100 g-0" style="min-height: 100vh;">
      <!-- Left Side - Illustration -->
      <div class="col-12 col-md-4 d-flex align-items-center justify-content-center p-0 left-illustration-col">
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" width="300" height="300"
          viewBox="0 0 567.01 492.18">
          <defs>
            <style>
              .cls-1 {
                fill: #e6ae38;
              }

              .cls-2 {
                fill: #012a4a;
              }
            </style>
          </defs>
          <path class="cls-2"
            d="M1.01,3.46c0-.25-1.18-.8-.58-1.51L3.47.92c56.36,2.34,115-2.95,171.09,0,55.15,2.91,103.39,29.04,135.27,73.73,78.44,109.94,7.42,255.59-122.33,272.3l-186.98.02c-1.4-.17.5-1.28.5-1.5C1.01,231.47,1.41,117.46,1.01,3.46ZM77.01,73.96v154c31.16-4.1,54.56-28.74,74.96-50.5l-24.47-26.5c-.83-1.31-.83-2.69.52-3.49,30.07-9.36,60.89-16.4,91.98-21.5l-23.01,99.98c-3.62,2.53-15.37-15.67-17.9-18.35-.79-.84-.68-.92-2.06-.63-21.6,33.88-59.92,61.31-99.01,71l3.48.99c1.87.53,5.35-.33,7.34-.32,3.39.03,6.77.05,10.16.09,6.77.06,13.54.14,20.31.22,10.36.13,20.72.29,31.08.48,4.89.09,9.62.01,14.48-.28s9.66-1.45,14.37-1.45c121.55-17.91,118.84-191.41-1.74-203.72h-100.49Z" />
          <path class="cls-1"
            d="M449.66,300.61c-45.41,44.79-113.64-24.86-66.69-69.19,44.83-42.32,110.83,25.65,66.69,69.19Z" />
          <path class="cls-2"
            d="M161.79,380.24c70.03-7.99,93.12,80.98,32.9,106.9-52.4,22.55-105.19-35.14-72.08-83.08,8.45-12.24,24.32-22.12,39.19-23.81ZM171.68,400.35c-34.01-.62-47.6,46.16-19.2,64.64,19.65,12.78,43.97,2.51,50.82-19.22s-9.31-45.02-31.63-45.42Z" />
          <path class="cls-2"
            d="M311.02,452.44v-1.47c26.1-8.77,27.65-45.55,6.9-61.42-5.96-4.56-16.03-7.86-23.41-8.59-15.31-1.52-32.94,1.13-48.5,0v108.5c0,.11,1.39,1.5,1.5,1.5h21c.11,0,1.5-1.39,1.5-1.5v-35.5c3.84.46,8.84-.67,12.48.02,7.43,1.42,18.65,31.2,25.02,36.98h25.5l-21.99-38.52ZM303.74,429.14c-1.01,1.1-2.24,1.96-3.48,2.78-1.16.77-2.38,1.78-3.79,2.01-1.17.19-2.39-.03-3.57,0s-2.46,0-3.69,0h-19.19v-31.98h22.5c8.17,0,15.58,8.44,15.58,16.5,0,3.93-1.7,7.81-4.35,10.68Z" />
          <path class="cls-2"
            d="M2.01,380.96c.09-4.65,22.67-1.68,25.23-1.43,5.63.56,11.26,1.28,16.84,2.24,15.54,2.66,31.88,7.26,42.1,19.92,8.51,10.53,13.1,24.36,12.4,37.89-.14,2.69-.49,5.37-1.06,8.01-.18.82-.38,1.63-.6,2.44-1.04,3.8-2.52,7.49-4.37,10.97-18.57,34.81-56.71,29.93-90.54,29.96,0,0,0-109.98,0-110ZM25.01,468.96s20.5,0,20.5,0c23.58,0,37.74-32.6,25.62-51.4-6.71-10.41-20.34-14.95-32.22-14.8-1.05.01-13.89-.14-13.89.21v66Z" />
          <path class="cls-2"
            d="M455.01,490.96h-24.5c-3.82-4.45-4.64-15.35-7.59-19.41-1.13-1.56-1.61-1.44-3.36-1.64-12.53-1.44-28.03,1.05-40.89.22-3.27,1.11-7.16,20.84-10.16,20.84h-23.5c11.84-36.4,26.46-71.95,39.56-107.94.63-1.32,1.59-1.77,2.96-2.04,2.63-.51,23.83-.32,25.48.47,1.21.58,1.97,2.31,2.48,3.52,13.13,35.32,27.34,70.43,39.51,105.99ZM415.01,448.96c-4.31-11.02-8.25-25.46-13.8-35.7-.36-.66-1.53-2.79-2.19-2.3l-15.01,38h31Z" />
          <path class="cls-2"
            d="M495.01,380.96v48c5.79-5.27,11.29-11.17,16.51-16.99,3.57-3.97,24.93-31.01,26.99-31.01h26.5l-43.04,51.5,45.04,58.5h-27.5l-37.49-46.53c-.76-.57-7.01,5.56-7.01,6.03v40.5h-24v-110h24Z" />
        </svg>
      </div>

      <!-- Right Side - Registration Form -->
      <div class="col-12 col-md-8 d-flex align-items-center justify-content-center p-0 right-register-col">
        <div class="register-form-container mx-auto">
          <div class="register-header mb-2">
            <div class="logo-section d-flex align-items-center mb-3">
              <svg class="text-center" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                version="1.1" id="Layer_1" x="0px" y="0px" width="70%" viewBox="0 0 1024 272"
                enable-background="new 0 0 1024 272" xml:space="preserve">
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M458.922394,94.798492   C450.323486,88.699631 443.460999,81.270607 435.805359,74.499451   C437.741943,72.083878 439.869659,72.755829 441.702148,72.751968   C465.191071,72.702477 488.680359,72.655815 512.169067,72.739929   C535.386719,72.823074 552.865112,86.422607 557.496521,108.620407   C561.925537,129.848358 552.612854,151.268112 531.886536,160.118057   C530.983521,160.503632 530.125854,160.995316 528.530701,161.798111   C539.386963,177.323456 550.075073,192.608307 561.586731,209.070892   C552.015381,209.070892 543.810303,209.162766 535.610046,209.005051   C533.605835,208.966507 532.748047,206.873642 531.712524,205.401474   C523.280273,193.413773 514.786499,181.467331 506.537903,169.354050   C504.541534,166.422302 502.433685,165.004379 498.812866,165.134674   C491.991486,165.380142 485.140381,165.484512 478.329865,165.120056   C473.336517,164.852829 472.123291,166.856384 472.250854,171.501724   C472.543427,182.155487 472.195496,192.826065 472.434723,203.482483   C472.529633,207.710693 471.378906,209.671066 466.842896,209.331894   C462.701050,209.022186 458.515930,209.171448 454.354401,209.284241   C451.317810,209.366562 449.698425,208.389786 449.703186,205.040894   C449.752167,170.557419 449.729767,136.073837 449.750092,101.590294   C449.750458,100.961388 450.030670,100.332642 450.318390,99.123497   C455.094269,100.844063 458.455566,104.600906 462.751190,106.444527   C470.830750,109.912148 473.653351,115.621140 472.440857,124.182755   C471.793396,128.754822 472.448761,133.498932 472.300415,138.158524   C472.202606,141.230347 473.090057,142.756454 476.496399,142.719254   C488.489319,142.588287 500.492737,142.937347 512.476501,142.580276   C526.388000,142.165771 535.908936,131.740143 535.703125,117.825264   C535.506470,104.523384 525.885986,95.223511 511.791382,95.073792   C494.304596,94.888039 476.815186,94.947319 458.922394,94.798492  z" />
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M251.902466,193.948029   C239.205399,204.521408 224.784637,209.238754 208.740799,209.280609   C193.748871,209.319717 178.754425,209.141296 163.766205,209.379868   C159.225189,209.452148 158.264099,207.837845 158.291794,203.549255   C158.449753,179.082230 158.298294,154.613113 158.236526,130.144760   C158.213440,120.998665 158.145416,111.852684 158.107147,102.706619   C158.102280,101.540932 158.177292,100.382431 159.495148,98.962784   C166.681961,102.820091 173.569168,107.317604 180.286423,112.058708   C181.934006,113.221581 181.268875,115.476807 181.271606,117.261314   C181.304199,138.583237 181.395737,159.906113 181.210770,181.226471   C181.173218,185.554550 182.422089,187.176819 186.867615,186.992767   C194.184479,186.689865 201.527039,187.065094 208.851181,186.869904   C230.569778,186.291077 245.884979,173.814835 251.090454,152.644394   C255.999893,132.677948 248.028427,111.781204 231.599884,101.556839   C225.238708,97.597939 218.306000,95.375908 210.822754,95.296295   C197.664825,95.156303 184.504227,95.154625 171.345856,95.249237   C168.299728,95.271133 165.982803,94.349442 163.739059,92.297066   C158.087173,87.127235 152.215363,82.198563 146.483841,77.114433   C145.426071,76.176132 143.898743,75.480064 143.922928,73.569153   C145.425018,72.114098 147.347275,72.753273 149.063614,72.748634   C168.719666,72.695511 188.376007,72.670616 208.032089,72.717934   C246.542938,72.810638 275.196228,101.567543 275.365082,140.059479   C275.458618,161.381088 268.283173,179.450638 251.902466,193.948029  z" />
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M797.578735,123.573921   C791.154419,130.771835 791.175781,130.755722 796.667358,138.043625   C813.011780,159.734421 829.352356,181.428207 845.639709,203.161774   C846.781372,204.685074 848.486511,206.033936 848.296143,209.075516   C839.915710,209.075516 831.527832,209.187042 823.146667,208.998901   C820.989380,208.950470 820.036743,206.662979 818.853577,205.086258   C805.552490,187.360794 792.271790,169.620117 778.977783,151.889328   C777.991760,150.574203 776.945923,149.303879 775.116211,146.983414   C769.603638,152.755447 764.678223,158.588577 759.037476,163.619629   C753.892334,168.208649 751.668640,173.203476 752.175659,180.157684   C752.767822,188.280670 752.203979,196.482101 752.365112,204.645081   C752.434021,208.136703 751.067688,209.416916 747.655212,209.298874   C742.827942,209.131912 737.990112,209.209274 733.157837,209.268356   C730.431335,209.301697 729.327332,208.168976 729.335876,205.362167   C729.465454,162.878555 729.562805,120.394737 729.541077,77.911018   C729.539124,74.043823 730.773621,72.454834 734.715271,72.674187   C738.868530,72.905304 743.056824,72.910355 747.208191,72.658440   C751.238403,72.413887 752.352661,74.170006 752.329041,77.958580   C752.213562,96.456642 752.293640,114.955971 752.318787,133.454819   C752.320618,134.769073 752.436768,136.083160 752.517334,137.763596   C755.077698,137.287338 756.226990,135.335175 757.633118,133.887451   C776.556274,114.405380 795.439697,94.884712 814.325256,75.366150   C815.493042,74.159302 816.613098,72.814407 818.444397,72.805779   C826.902405,72.765915 835.360718,72.788185 845.370178,72.788185   C829.705994,91.083176 813.589050,107.039825 797.578735,123.573921  z" />
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M648.799194,72.730682   C653.210144,72.207863 655.615234,73.554039 657.309998,77.510475   C675.138428,119.131882 693.168030,160.667099 711.074890,202.255051   C711.893494,204.156250 713.299866,206.016144 712.605774,209.066147   C705.307312,209.066147 697.896912,209.159454 690.491516,209.008728   C688.299316,208.964096 687.799255,206.751953 687.096558,205.100693   C684.359009,198.667282 681.442139,192.295227 679.064331,185.729263   C677.669373,181.877380 675.741089,180.241165 671.462097,180.331909   C655.980408,180.660202 640.490723,180.605972 625.004089,180.708405   C623.831787,180.716156 622.674255,180.766800 621.116638,179.286392   C623.499878,173.138763 625.917358,166.668167 628.535950,160.279999   C629.412292,158.142120 631.645203,158.700439 633.407043,158.691437   C642.568115,158.644638 651.729675,158.692474 660.890686,158.638168   C662.660645,158.627686 664.559875,159.125443 666.832031,157.342148   C659.105225,139.286774 651.311340,121.074608 643.279297,102.306068   C640.679504,104.978081 639.956238,107.745262 638.897095,110.266708   C625.875916,141.267456 612.838135,172.261780 600.008606,203.341934   C598.240784,207.624756 596.073669,209.702423 591.192261,209.335007   C585.333374,208.894012 579.415894,209.230789 572.344299,209.230789   C575.340393,202.111710 577.737427,196.340469 580.192810,190.594162   C595.957581,153.699677 611.846130,116.857269 627.385559,79.868210   C629.648132,74.482452 632.345215,71.797974 638.346130,72.654411   C641.610718,73.120308 644.996948,72.733475 648.799194,72.730682  z" />
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M412.829102,184.119324   C414.736237,186.595230 412.756439,187.770798 411.562927,188.936508   C390.484894,209.523636 365.717285,217.209259 337.448883,207.591064   C309.867767,198.206711 294.391113,178.073135 290.625061,149.094437   C288.606018,133.558609 291.699951,119.040932 299.114075,105.304276   C301.000244,101.809654 302.768951,101.043732 305.916168,103.889191   C309.369019,107.010979 313.029968,109.922401 316.762238,112.708450   C319.258850,114.572144 319.310791,116.368454 318.094788,119.106812   C309.527405,138.400085 311.857758,156.396378 325.129944,172.829102   C337.463501,188.099716 361.181458,192.979050 379.104340,183.734070   C374.483429,172.603073 369.834503,161.404541 365.185547,150.205994   C365.632904,149.876862 366.080261,149.547745 366.527618,149.218613   C381.878723,160.770294 397.229828,172.321976 412.829102,184.119324  z" />
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M423.547943,111.602829   C432.906464,135.090622 431.197388,157.327942 418.323792,179.791885   C412.212921,175.112091 406.677704,170.956161 401.242371,166.673447   C398.767914,164.723709 400.803925,162.755493 401.583893,160.887711   C408.380066,144.612625 408.065735,128.703629 398.531860,113.595215   C387.616394,96.297401 366.120422,88.405380 346.595123,94.631065   C342.090729,96.067299 339.988892,95.342117 338.219543,91.099197   C336.191925,86.236931 333.578278,81.619057 331.232178,76.920975   C356.625397,63.709171 404.099518,68.065552 423.547943,111.602829  z" />
                <path fill="#012a4a" opacity="1.000000" stroke="none"
                  d=" M329.211365,94.804581   C337.160095,103.585182 344.873840,112.099731 352.587616,120.614281   C352.264221,120.991287 351.940826,121.368294 351.617432,121.745300   C333.490631,109.769188 315.363861,97.793083 296.959747,85.633759   C299.078552,82.876099 301.854706,84.239075 304.004333,83.517830   C313.610779,80.294708 320.955353,83.074753 326.316406,91.576210   C327.014252,92.682747 328.080688,93.556801 329.211365,94.804581  z" />
              </svg>
            </div>
            <h1 class="welcome-title">Create Account</h1>
            <p class="welcome-subtitle">Join us to manage your queues efficiently</p>
          </div>

          <!-- Registration Stepper -->
          <p-steps [model]="steps" [readonly]="false" [activeIndex]="activeStepIndex"></p-steps>

          <!-- Step Content -->
          <div class="step-content mt-4">
            <!-- Step 1: Main Data -->
            <div *ngIf="activeStepIndex === 0" class="step-panel">
              <form #mainDataForm="ngForm">
                <!-- Username Field -->
                <div class="field mb-3">
                  <label for="username" class="form-label">Username</label>
                  <input type="text" pInputText id="username" name="username" [(ngModel)]="registrationData.username"
                    placeholder="Enter your username" class="form-control" required minlength="8"
                    #usernameInput="ngModel" />
                  <div *ngIf="usernameInput.invalid && usernameInput.touched" class="text-danger mt-1">
                    <small *ngIf="usernameInput.errors?.['required']">Username is required</small>
                    <small *ngIf="usernameInput.errors?.['minlength']">Username must be at least 8 characters</small>
                  </div>
                </div>

                <!-- Email Field -->
                <div class="field mb-3">
                  <label for="email" class="form-label">Email</label>
                  <input type="email" pInputText id="email" name="email" [(ngModel)]="registrationData.email"
                    placeholder="Enter your email" class="form-control" required minlength="6" #emailInput="ngModel" />
                  <div *ngIf="emailInput.invalid && emailInput.touched" class="text-danger mt-1">
                    <small *ngIf="emailInput.errors?.['required']">Email is required</small>
                    <small *ngIf="emailInput.errors?.['email']">Please enter a valid email address</small>
                    <small *ngIf="emailInput.errors?.['minlength']">Email must be at least 6 characters</small>
                  </div>
                </div>

                <!-- Phone Number Field -->
                <div class="field mb-3">
                  <label for="phoneNumber" class="form-label">Phone Number</label>
                  <input type="tel" pInputText id="phoneNumber" name="phoneNumber"
                    [(ngModel)]="registrationData.phoneNumber" placeholder="Enter your phone number"
                    class="form-control" required minlength="8" #phoneNumberInput="ngModel" />
                  <div *ngIf="phoneNumberInput.invalid && phoneNumberInput.touched" class="text-danger mt-1">
                    <small *ngIf="phoneNumberInput.errors?.['required']">Phone number is required</small>
                    <small *ngIf="phoneNumberInput.errors?.['minlength']">Phone number must be at least 8
                      characters</small>
                  </div>
                </div>

                <!-- Password Field -->
                <div class="field mb-3">
                  <label for="password" class="form-label">Password</label>
                  <div class="password-input-container">
                    <input [type]="showPassword ? 'text' : 'password'" pInputText id="password" name="password"
                      [(ngModel)]="registrationData.password" placeholder="Enter your password" class="form-control"
                      required minlength="8" #passwordInput="ngModel" />
                    <button type="button" class="password-toggle-btn" (click)="togglePasswordVisibility()">
                      <i [class]="showPassword ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
                    </button>
                  </div>
                  <div *ngIf="passwordInput.invalid && passwordInput.touched" class="text-danger mt-1">
                    <small *ngIf="passwordInput.errors?.['required']">Password is required</small>
                    <small *ngIf="passwordInput.errors?.['minlength']">Password must be at least 8 characters</small>
                  </div>
                </div>

                <!-- Confirm Password Field -->
                <div class="field mb-3">
                  <label for="confirmPassword" class="form-label">Confirm Password</label>
                  <div class="password-input-container">
                    <input [type]="showPassword ? 'text' : 'password'" pInputText id="confirmPassword"
                      name="confirmPassword" [(ngModel)]="registrationData.confirmPassword"
                      placeholder="Confirm your password" class="form-control" required minlength="8"
                      #confirmPasswordInput="ngModel" />
                    <button type="button" class="password-toggle-btn" (click)="togglePasswordVisibility()">
                      <i [class]="showPassword ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
                    </button>
                  </div>
                  <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched" class="text-danger mt-1">
                    <small *ngIf="confirmPasswordInput.errors?.['required']">Please confirm your password</small>
                    <small *ngIf="confirmPasswordInput.errors?.['minlength']">Confirm password must be at least 8
                      characters</small>
                  </div>
                  <div
                    *ngIf="registrationData.password !== registrationData.confirmPassword && registrationData.confirmPassword"
                    class="text-danger mt-1">
                    <small>Passwords do not match</small>
                  </div>
                </div>

                <!-- Role Selection -->
                <div class="field mb-4">
                  <label for="role" class="form-label">Select Role</label>
                  <p-dropdown id="role" name="role" [options]="roles" [(ngModel)]="registrationData.role"
                    placeholder="Choose your role" optionLabel="name" optionValue="value" class="w-100"
                    [required]="true" #roleInput="ngModel">
                  </p-dropdown>
                  <div *ngIf="roleInput.invalid && roleInput.touched" class="text-danger mt-1">
                    <small>Please select a role</small>
                  </div>
                </div>
              </form>
            </div>

            <!-- Step 2: Role-specific Data -->
            <div *ngIf="activeStepIndex === 1" class="step-panel">
              <!-- No Role Selected Message -->
              <div *ngIf="!registrationData.role" class="no-role-message">
                <div class="text-center">
                  <i class="pi pi-exclamation-triangle"
                    style="font-size: 3rem; color: #ffc107; margin-bottom: 1rem;"></i>
                  <h4 class="text-warning mb-3">Role Not Selected</h4>
                  <p class="text-muted mb-4">You need to select a role in the first step to continue.</p>
                  <p-button label="Go Back to Step 1" icon="pi pi-arrow-left" styleClass="p-button-secondary"
                    (onClick)="previousStep()">
                  </p-button>
                </div>
              </div>

              <!-- Client-specific fields -->
              <div *ngIf="registrationData.role === 'Client'" class="role-specific-content">
                <h4 class="mb-3">Client Information</h4>
                <form #clientForm="ngForm">
                  <!-- First Name -->
                  <div class="field mb-3">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" pInputText id="firstName" name="firstName"
                      [(ngModel)]="registrationData.firstName" placeholder="Enter your first name" class="form-control"
                      required #firstNameInput="ngModel" />
                    <div *ngIf="firstNameInput.invalid && firstNameInput.touched" class="text-danger mt-1">
                      <small>First name is required</small>
                    </div>
                  </div>

                  <!-- Last Name -->
                  <div class="field mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" pInputText id="lastName" name="lastName" [(ngModel)]="registrationData.lastName"
                      placeholder="Enter your last name" class="form-control" required #lastNameInput="ngModel" />
                    <div *ngIf="lastNameInput.invalid && lastNameInput.touched" class="text-danger mt-1">
                      <small>Last name is required</small>
                    </div>
                  </div>

                  <!-- Gender -->
                  <div class="field mb-3">
                    <label for="gender" class="form-label">Gender</label>
                    <p-dropdown id="gender" name="gender" [options]="['Male', 'Female']"
                      [(ngModel)]="registrationData.gender" placeholder="Select your gender" class="w-100"
                      [required]="true" #genderInput="ngModel">
                    </p-dropdown>
                    <div *ngIf="genderInput.invalid && genderInput.touched" class="text-danger mt-1">
                      <small>Gender is required</small>
                    </div>
                  </div>

                  <!-- Street -->
                  <div class="field mb-3">
                    <label for="street" class="form-label">Street</label>
                    <input type="text" pInputText id="street" name="street" [(ngModel)]="registrationData.street"
                      placeholder="Enter your street address" class="form-control" required #streetInput="ngModel" />
                    <div *ngIf="streetInput.invalid && streetInput.touched" class="text-danger mt-1">
                      <small>Street is required</small>
                    </div>
                  </div>

                  <!-- City -->
                  <div class="field mb-3">
                    <label for="city" class="form-label">City</label>
                    <input type="text" pInputText id="city" name="city" [(ngModel)]="registrationData.city"
                      placeholder="Enter your city" class="form-control" required #cityInput="ngModel" />
                    <div *ngIf="cityInput.invalid && cityInput.touched" class="text-danger mt-1">
                      <small>City is required</small>
                    </div>
                  </div>

                  <!-- Governorate -->
                  <div class="field mb-3">
                    <label for="governorate" class="form-label">Governorate</label>
                    <input type="text" pInputText id="governorate" name="governorate"
                      [(ngModel)]="registrationData.governorate" placeholder="Enter your governorate"
                      class="form-control" required #governorateInput="ngModel" />
                    <div *ngIf="governorateInput.invalid && governorateInput.touched" class="text-danger mt-1">
                      <small>Governorate is required</small>
                    </div>
                  </div>

                  <!-- Country -->
                  <div class="field mb-3">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" pInputText id="country" name="country" [(ngModel)]="registrationData.country"
                      placeholder="Enter your country" class="form-control" required #countryInput="ngModel" />
                    <div *ngIf="countryInput.invalid && countryInput.touched" class="text-danger mt-1">
                      <small>Country is required</small>
                    </div>
                  </div>

                  <!-- Birth Date -->
                  <div class="field mb-3">
                    <label for="birthDate" class="form-label">Date of Birth</label>
                    <p-calendar id="birthDate" name="birthDate" [(ngModel)]="registrationData.birthDate"
                      placeholder="Select your date of birth" class="w-100" [required]="true" #birthDateInput="ngModel"
                      [showIcon]="true" [iconDisplay]="'input'" [maxDate]="today">
                    </p-calendar>
                    <div *ngIf="birthDateInput.invalid && birthDateInput.touched" class="text-danger mt-1">
                      <small>Date of birth is required</small>
                    </div>
                  </div>

                  <!-- Image -->
                  <div class="field mb-3">
                    <label for="image" class="form-label">Profile Image</label>
                    <input type="file" id="image" name="image" (change)="onFileSelected($event)" class="form-control"
                      accept="image/*" />
                  </div>
                </form>
              </div>

              <!-- Provider-specific fields -->
              <div *ngIf="registrationData.role === 'Provider'" class="role-specific-content">
                <h4 class="mb-3">Provider Information</h4>
                <form #providerForm="ngForm">
                  <!-- First Name -->
                  <div class="field mb-3">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" pInputText id="firstName" name="firstName"
                      [(ngModel)]="registrationData.firstName" placeholder="Enter your first name" class="form-control"
                      required #firstNameInput="ngModel" />
                    <div *ngIf="firstNameInput.invalid && firstNameInput.touched" class="text-danger mt-1">
                      <small>First name is required</small>
                    </div>
                  </div>

                  <!-- Last Name -->
                  <div class="field mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" pInputText id="lastName" name="lastName" [(ngModel)]="registrationData.lastName"
                      placeholder="Enter your last name" class="form-control" required #lastNameInput="ngModel" />
                    <div *ngIf="lastNameInput.invalid && lastNameInput.touched" class="text-danger mt-1">
                      <small>Last name is required</small>
                    </div>
                  </div>

                  <!-- Gender -->
                  <div class="field mb-3">
                    <label for="gender" class="form-label">Gender</label>
                    <p-dropdown id="gender" name="gender" [options]="['Male', 'Female']"
                      [(ngModel)]="registrationData.gender" placeholder="Select your gender" class="w-100"
                      [required]="true" #genderInput="ngModel">
                    </p-dropdown>
                    <div *ngIf="genderInput.invalid && genderInput.touched" class="text-danger mt-1">
                      <small>Gender is required</small>
                    </div>
                  </div>

                  <!-- Street -->
                  <div class="field mb-3">
                    <label for="street" class="form-label">Street</label>
                    <input type="text" pInputText id="street" name="street" [(ngModel)]="registrationData.street"
                      placeholder="Enter your street address" class="form-control" required #streetInput="ngModel" />
                    <div *ngIf="streetInput.invalid && streetInput.touched" class="text-danger mt-1">
                      <small>Street is required</small>
                    </div>
                  </div>

                  <!-- City -->
                  <div class="field mb-3">
                    <label for="city" class="form-label">City</label>
                    <input type="text" pInputText id="city" name="city" [(ngModel)]="registrationData.city"
                      placeholder="Enter your city" class="form-control" required #cityInput="ngModel" />
                    <div *ngIf="cityInput.invalid && cityInput.touched" class="text-danger mt-1">
                      <small>City is required</small>
                    </div>
                  </div>

                  <!-- Governorate -->
                  <div class="field mb-3">
                    <label for="governorate" class="form-label">Governorate</label>
                    <input type="text" pInputText id="governorate" name="governorate"
                      [(ngModel)]="registrationData.governorate" placeholder="Enter your governorate"
                      class="form-control" required #governorateInput="ngModel" />
                    <div *ngIf="governorateInput.invalid && governorateInput.touched" class="text-danger mt-1">
                      <small>Governorate is required</small>
                    </div>
                  </div>

                  <!-- Country -->
                  <div class="field mb-3">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" pInputText id="country" name="country" [(ngModel)]="registrationData.country"
                      placeholder="Enter your country" class="form-control" required #countryInput="ngModel" />
                    <div *ngIf="countryInput.invalid && countryInput.touched" class="text-danger mt-1">
                      <small>Country is required</small>
                    </div>
                  </div>

                  <!-- Birth Date -->
                  <div class="field mb-3">
                    <label for="birthDate" class="form-label">Date of Birth</label>
                    <p-calendar id="birthDate" name="birthDate" [(ngModel)]="registrationData.birthDate"
                      placeholder="Select your date of birth" class="w-100" [required]="true" #birthDateInput="ngModel"
                      [showIcon]="true" [iconDisplay]="'input'" [maxDate]="today">
                    </p-calendar>
                    <div *ngIf="birthDateInput.invalid && birthDateInput.touched" class="text-danger mt-1">
                      <small>Date of birth is required</small>
                    </div>
                  </div>

                  <!-- Image -->
                  <div class="field mb-3">
                    <label for="image" class="form-label">Profile Image</label>
                    <input type="file" id="image" name="image" (change)="onFileSelected($event)" class="form-control"
                      accept="image/*" />
                  </div>

                  <!-- Specialization -->
                  <div class="field mb-3">
                    <label for="specialization" class="form-label">Specialization</label>
                    <p-dropdown id="specialization" name="specialization" [options]="specializations"
                      [(ngModel)]="selectedSpecialization" placeholder="Select your specialization" class="w-100"
                      [required]="true" #specializationInput="ngModel" [filter]="true" [showClear]="true"
                      (onChange)="onSpecializationChange()">
                    </p-dropdown>
                    <div *ngIf="specializationInput.invalid && specializationInput.touched" class="text-danger mt-1">
                      <small>Specialization is required</small>
                    </div>
                  </div>

                  <!-- Custom Specialization Input -->
                  <div *ngIf="showCustomSpecialization" class="field mb-3 custom-specialization-input">
                    <label for="customSpecialization" class="form-label">Custom Specialization</label>
                    <input type="text" pInputText id="customSpecialization" name="customSpecialization"
                      [(ngModel)]="registrationData.specialization" placeholder="Enter your custom specialization"
                      class="form-control" required #customSpecializationInput="ngModel"
                      (input)="onCustomSpecializationInput()" />
                    <div *ngIf="customSpecializationInput.invalid && customSpecializationInput.touched"
                      class="text-danger mt-1">
                      <small>Custom specialization is required</small>
                    </div>
                  </div>

                  <!-- Bio -->
                  <div class="field mb-3">
                    <label for="bio" class="form-label">Bio</label>
                    <textarea pInputTextarea id="bio" name="bio" [(ngModel)]="registrationData.bio"
                      placeholder="Tell us about yourself and your experience" class="form-control" rows="4" required
                      #bioInput="ngModel"></textarea>
                    <div *ngIf="bioInput.invalid && bioInput.touched" class="text-danger mt-1">
                      <small>Bio is required</small>
                    </div>
                  </div>

                  <!-- Experience Years -->
                  <div class="field mb-3">
                    <label for="experienceYears" class="form-label">Years of Experience</label>
                    <input type="number" pInputText id="experienceYears" name="experienceYears"
                      [(ngModel)]="registrationData.experienceYears" placeholder="Enter years of experience"
                      class="form-control" required min="0" max="50" #experienceYearsInput="ngModel" />
                    <div *ngIf="experienceYearsInput.invalid && experienceYearsInput.touched" class="text-danger mt-1">
                      <small>Years of experience is required</small>
                    </div>
                  </div>

                  <!-- License Number -->
                  <div class="field mb-3">
                    <label for="licenseNumber" class="form-label">License Number</label>
                    <input type="text" pInputText id="licenseNumber" name="licenseNumber"
                      [(ngModel)]="registrationData.licenseNumber" placeholder="Enter your license number"
                      class="form-control" required #licenseNumberInput="ngModel" />
                    <div *ngIf="licenseNumberInput.invalid && licenseNumberInput.touched" class="text-danger mt-1">
                      <small>License number is required</small>
                    </div>
                  </div>

                  <!-- Provider Title -->
                  <div class="field mb-3">
                    <label for="providerTitle" class="form-label">Provider Title</label>
                    <p-dropdown id="providerTitle" name="providerTitle" [options]="doctorTitles"
                      [(ngModel)]="registrationData.providerTitle" placeholder="Select your professional title"
                      class="w-100" required #providerTitleInput="ngModel">
                      <ng-template let-title pTemplate="item">
                        {{ DoctorTitle[title] }}
                      </ng-template>
                      <ng-template let-title pTemplate="selectedItem">
                        {{ DoctorTitle[title] }}
                      </ng-template>
                    </p-dropdown>
                    <div *ngIf="providerTitleInput.invalid && providerTitleInput.touched" class="text-danger mt-1">
                      <small>Provider title is required</small>
                    </div>
                  </div>

                  <!-- Estimated Duration -->
                  <div class="field mb-3">
                    <label for="estimatedDuration" class="form-label">Estimated Duration (minutes)</label>
                    <input type="number" pInputText id="estimatedDuration" name="estimatedDuration"
                      [(ngModel)]="registrationData.estimatedDuration"
                      placeholder="Enter estimated appointment duration" class="form-control" required min="15"
                      max="180" #estimatedDurationInput="ngModel" />
                    <div *ngIf="estimatedDurationInput.invalid && estimatedDurationInput.touched"
                      class="text-danger mt-1">
                      <small>Estimated duration is required</small>
                    </div>
                  </div>
                </form>
              </div>


            </div>
          </div>

          <!-- Navigation Buttons -->
          <div class="step-navigation mt-4 d-flex justify-content-between">
            <p-button *ngIf="activeStepIndex > 0" label="Previous" icon="pi pi-chevron-left"
              styleClass="p-button-secondary" (onClick)="previousStep()">
            </p-button>

            <div class="ms-auto">
              <p-button *ngIf="activeStepIndex < steps.length - 1" label="Next" icon="pi pi-chevron-right"
                iconPos="right" styleClass="p-button-primary" (onClick)="nextStep()" [disabled]="!isCurrentStepValid()">
              </p-button>

              <p-button *ngIf="activeStepIndex === steps.length - 1" label="Create Account" icon="pi pi-check"
                styleClass="p-button-success" (onClick)="onRegister()" [loading]="isLoading"
                [disabled]="!isCurrentStepValid()">
              </p-button>
            </div>
          </div>

          <!-- Sign In Link -->
          <div class="signin-section text-center mt-4">
            <span class="signin-text">Already have an account? </span>
            <a [routerLink]="['/login']" routerLinkActive="router-link-active" class="signin-link">
              Sign in
            </a>
          </div>
        </div>
      </div>


    </div>
  </div>
</div>