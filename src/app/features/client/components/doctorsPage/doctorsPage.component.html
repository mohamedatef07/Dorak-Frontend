<app-nav-bar></app-nav-bar>
<div class="container doctors-page-container pb-3">
  <!-- Search bar with dropdowns -->
  <div class="search-container">
    <div class="row w-100">
      <div class="col-12">
        <div class="input-group">
          <!-- Specialty Dropdown -->
          <div class="dropdown">
            <button
              class="specialty-dropdown dropdown-toggle btn btn-outline-secondary"
              type="button"
              data-bs-toggle="dropdown"
            >
              {{ filterModel.Specialization || "Specialty" }}
            </button>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" (click)="onSpecializationChange('')"
                  >All</a
                >
              </li>
              <li *ngFor="let s of specialties">
                <a class="dropdown-item" (click)="onSpecializationChange(s)">{{
                  s
                }}</a>
              </li>
            </ul>
          </div>

          <!-- Search Input -->
          <input
            type="text"
            [(ngModel)]="searchText"
            class="search-input form-control ms-2"
            placeholder="Search by Name"
          />

          <!-- Search Button -->
          <button
            class="search-button btn btn-primary ms-2"
            type="button"
            (click)="searchDoctors()"
          >
            Search <i class="fas fa-search ms-1"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Filters Sidebar -->
    <div class="col-lg-3 col-md-4">
      <div class="filter-panel">
        <h5 class="mb-3 fs-6">Filters</h5>
        <!-- Title Filter -->
        <div class="mb-3">
          <label class="fw-bold fs-5">Title</label>
          @for(title of titles; track $index) {
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                [value]="title"
                (change)="onTitleChange($event)"
              />
              <label class="form-check-label">{{ title }}</label>
            </div>
          }
        </div>
        <!-- Gender Filter -->
        <div class="mb-3">
          <label class="fw-bold fs-5">Gender</label>
          @for(gender of genders; track $index) {
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                [value]="gender"
                (change)="onGenderChange($event)"
              />
              <label class="form-check-label">{{ gender }}</label>
            </div>
          }
        </div>
        <!-- City Filter -->
        <div class="mb-3">
          <label class="fw-bold fs-5">City</label>
          <div *ngFor="let c of cities">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                [value]="c"
                (change)="onCityChange($event)"
              />
              <label class="form-check-label">{{ c }}</label>
            </div>
          </div>
        </div>
        <!-- Rate Filter -->
        <div class="mb-3">
          <label class="fw-bold">Rate</label>
          <input
            type="number"
            class="form-control"
            placeholder="Min Rate"
            [(ngModel)]="filterModel.MinRate"
            min="0"
          />
          <input
            type="number"
            class="form-control mt-1"
            placeholder="Max Rate"
            [(ngModel)]="filterModel.MaxRate"
            min="0"
          />
        </div>

        <!-- Price Filter -->
        <div class="mb-3">
          <label class="fw-bold">Price</label>
          <input
            type="number"
            class="form-control"
            placeholder="Min Price"
            [(ngModel)]="filterModel.MinPrice"
            min="100"
          />
          <input
            type="number"
            class="form-control mt-1"
            placeholder="Max Price"
            [(ngModel)]="filterModel.MaxPrice"
            min="2000"
          />
        </div>

        <!-- Date Filter -->
        <div class="mb-3">
          <label class="fw-bold">Available Date</label>
          <input
            type="date"
            class="form-control"
            [(ngModel)]="filterModel.AvailableDate"
          />
        </div>
      </div>
    </div>

    <!-- Doctor listings -->
    <div class="col-lg-9 col-md-8">
      <h4 class="content-title">All Specialties</h4>
      <p class="text-muted mb-4">
        <small>{{ filteredDoctors.length }} doctors</small>
      </p>

      <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">
        <div class="col" *ngFor="let doc of doctors">
          <div class="doctor-card">
            <img
              *ngIf="fullImagePath"
              [src]="fullImagePath"
              alt="Doctor Image"
              class="img-thumbnail"
            />

            <div class="card-body">
              <div class="doctor-name">{{ doc.FullName }}</div>
              <div class="doctor-specialty">{{ doc.Specialization }}</div>
              <div class="features">
                <div class="feature">
                  <i class="fa-solid fa-star feature-icon"></i> {{ doc.Rate }}
                </div>
                <div class="feature">
                  <i class="fa-regular fa-clock feature-icon"></i>
                  {{ doc.EstimatedDuration }}
                </div>
                <div class="feature">
                  <i class="fa-solid fa-dollar-sign feature-icon"></i>
                  {{ doc.Price }}
                </div>
                <div class="feature">
                  <i class="fa-solid fa-location-dot feature-icon"></i>
                  {{ doc.City }}
                </div>
              </div>
              <button class="book-button" (click)="goToDetails(doc.id)">
                BOOK NOW
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-client-footer></app-client-footer>
