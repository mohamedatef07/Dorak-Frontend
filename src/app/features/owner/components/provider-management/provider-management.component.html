<!-- Filter Bar -->
 <h2 class="page-title">View Doctors</h2>
<div class="filter d-flex align-items-center my-3">
  <div class="icon px-2 filter-border">
    <svg class="m-3" width="21" height="23" viewBox="0 0 21 23" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill="#012a4a" fill-rule="evenodd" clip-rule="evenodd"
        d="M10.4848 9.52295C15.4826 9.52295 19.5341 7.76827 19.5341 5.60376C19.5341 3.43925 15.4826 1.68457 10.4848 1.68457C5.48706 1.68457 1.43555 3.43925 1.43555 5.60376C1.43555 7.76827 5.48706 9.52295 10.4848 9.52295Z"
        stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      <path
        d="M1.43555 5.604C1.4379 9.53668 4.31846 12.953 8.39654 13.8596V19.3212C8.39654 20.4034 9.33151 21.2808 10.4848 21.2808C11.6382 21.2808 12.5731 20.4034 12.5731 19.3212V13.8596C16.6512 12.953 19.5318 9.53668 19.5341 5.604"
        stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </div>
  <div class="sort-by filter-border">
    <select class="border-0 p-3 mx-2" name="sort" id="sort" [(ngModel)]="sortFilter" (ngModelChange)="onSortChange($event)">
      <option value="" disabled selected hidden>Sort By</option>
      <option value="Name">Name</option>
    </select>
  </div>
  <div class="filter-border">
    <select class="border-0 p-3 mx-2" name="status" id="status" [(ngModel)]="statusFilter" (ngModelChange)="onStatusFilterChange($event)">
      <option value="" disabled selected hidden>Status</option>
      <option value="Online">Online</option>
      <option value="Offline">Offline</option>
    </select>
  </div>
  <div class="filter-border">
    <select class="border-0 p-3 mx-2" name="specialization" id="specialization" [(ngModel)]="specializationFilter" (ngModelChange)="onSpecializationFilterChange($event)">
      <option value="" disabled selected hidden>Specialization</option>
      <option *ngFor="let spec of specializations" [value]="spec">{{ spec }}</option>
    </select>
  </div>
  <div class="reset-filter p-3 mx-2" (click)="resetFilters()">
    Reset Filter
    <svg width="25px" height="25px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
      <g fill="none" fill-rule="evenodd" stroke="#e74c3c" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 2)">
        <path d="m12.5 1.5c2.4138473 1.37729434 4 4.02194088 4 7 0 4.418278-3.581722 8-8 8s-8-3.581722-8-8 3.581722-8 8-8" />
        <path d="m12.5 5.5v-4h4" />
      </g>
    </svg>
  </div>
</div>

<!-- Table -->
<div class="doctors-table my-3">
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>NAME</th>
        <th>MOBILE</th>
        <th>SPECIALIZATION</th>
        <th>STATUS</th>
        <th>ACTIONS</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of dataSource.data; let i = index">
        <td>{{ (pageIndex * pageSize) + i + 1 }}</td>
        <td>{{ row.FirstName || 'Unknown' }} {{ row.LastName || '' }}</td>
        <td>{{ row.PhoneNumber || 'N/A' }}</td>
        <td>{{ row.Specialization || 'N/A' }}</td>
        <td>
          <span [ngClass]="{
            'status-online': row.Status === 0,
            'status-offline': row.Status === 1
          }">
            {{ row.Status === 0 ? 'Online' : row.Status === 1 ? 'Offline' : row.Status === 2 ? 'OnHold' : 'N/A' }}
          </span>
        </td>
        <td>
          <div style="display: flex; gap: 0.75rem; justify-content: center;">
            <button class="view-doc-profile me-1" (click)="viewProfile(row.ProviderId || '')">View Profile</button>
            <button class="view-doc-profile me-1" (click)="reschedule(row.ProviderId || '')">Reschedule</button>
            <button class="view-doc-profile" (click)="deleteProvider(row.ProviderId || '')">Delete</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Pagination -->
<div class="pagination-container ms-5">
  <div class="showing-text">
    Showing {{ getDisplayRange() }} of {{ totalItems }}
  </div>
  <div class="pagination-buttons d-flex">
    <button class="pagination-btn" (click)="previousPage()" [disabled]="pageIndex === 0" aria-label="Previous page">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
        class="bi bi-chevron-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
      </svg>
    </button>
    <button class="pagination-btn" (click)="nextPage()" [disabled]="(pageIndex + 1) * pageSize >= totalItems" aria-label="Next page">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
        class="bi bi-chevron-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
      </svg>
    </button>
  </div>
</div>

<!-- Delete Popup -->
<div *ngIf="showDeletePopup" #deletePopup class="custom-popup">
  <div class="popup-content">
    <p>Are you sure you want to delete this doctor?</p>
    <div class="popup-actions">
      <button class="popup-btn yes-btn" (click)="confirmDelete()">Yes</button>
      <button class="popup-btn no-btn" (click)="cancelDelete()">No</button>
    </div>
  </div>
</div>

